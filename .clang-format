---
# =============================================================================
# Byteweave C++ formatting
# - Keep it simple and stable across Linux/macOS/Windows and CF versions.
# - Amalgamation-safe: never reorder includes or perturb IWYU trailing comments.
# =============================================================================

BasedOnStyle: LLVM
Language: Cpp

# -----------------------------------------------------------------------------
# 1) Project invariants (amalgamation / IWYU safety)
# -----------------------------------------------------------------------------
SortIncludes: false # Do NOT reorder includes; single-header depends on order
IncludeBlocks: Preserve # Keep grouping exactly as written (no merging/splitting)
AlignTrailingComments: false # Avoid shifting `// IWYU pragma: keep` or end-of-line notes
SortUsingDeclarations: false # Keep local `using ...` in author-chosen order

# -----------------------------------------------------------------------------
# 2) Line length & indentation
# -----------------------------------------------------------------------------
ColumnLimit: 100
IndentWidth: 2
ContinuationIndentWidth: 2
TabWidth: 2
UseTab: Never
IndentCaseLabels: true
KeepEmptyLinesAtTheStartOfBlocks: true
NamespaceIndentation: None
FixNamespaceComments: true
CompactNamespaces: false

# Preprocessor: readable but minimal indentation
IndentPPDirectives: AfterHash
PPIndentWidth: 2

# -----------------------------------------------------------------------------
# 3) Spacing & wrapping
# -----------------------------------------------------------------------------
BreakBeforeBraces: Stroustrup
SpaceBeforeParens: ControlStatements
SpacesInAngles: Never
SpaceBeforeInheritanceColon: true
SpaceBeforeCtorInitializerColon: true
ConstructorInitializerAllOnOneLineOrOnePerLine: true
ConstructorInitializerIndentWidth: 2

# -----------------------------------------------------------------------------
# 4) Alignment (tasteful, not overbearing)
# -----------------------------------------------------------------------------
AlignAfterOpenBracket: Align
AlignOperands: Align
AlignConsecutiveAssignments: Consecutive
AlignConsecutiveDeclarations: Consecutive

# -----------------------------------------------------------------------------
# 5) Short forms / bin packing
# -----------------------------------------------------------------------------
AllowShortFunctionsOnASingleLine: InlineOnly
AllowShortIfStatementsOnASingleLine: Never
BinPackArguments: false
BinPackParameters: false

# -----------------------------------------------------------------------------
# 6) Pointers / references
# -----------------------------------------------------------------------------
DerivePointerAlignment: false
PointerAlignment: Left

# -----------------------------------------------------------------------------
# 7) Comments
# -----------------------------------------------------------------------------
ReflowComments: true
