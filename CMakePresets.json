{
  "version": 2,

  "cmakeMinimumRequired": {
    "major": 3,
    "minor": 20,
    "patch": 0
  },

  "configurePresets": [
    {
      "name": "base",
      "hidden": true,
      "generator": "Ninja"
    },

    {
      "name": "dev-base",
      "hidden": true,
      "inherits": "base",
      "cacheVariables": {
        "BYTEWEAVE_CONSUME_MODE": "library",

        "BYTEWEAVE_BUILD_EXAMPLES": true,
        "BYTEWEAVE_BUILD_LIBRARY": true,
        "BYTEWEAVE_BUILD_SHARED": true,
        "BYTEWEAVE_BUILD_SINGLE_HEADER": false,
        "BYTEWEAVE_BUILD_TESTS": true,
        "BYTEWEAVE_COPY_COMPILE_COMMANDS": true,
        "BYTEWEAVE_EXPORT_COMPILE_COMMANDS": true,
        "BYTEWEAVE_WARNINGS": true,
        "BYTEWEAVE_WARNINGS_STRICT": true,
        "BYTEWEAVE_WERROR": false
      }
    },

    {
      "name": "dev-debug",
      "inherits": "dev-base",
      "binaryDir": "build/dev-debug",
      "cacheVariables": {
        "CMAKE_BUILD_TYPE": "Debug"
      }
    },

    {
      "name": "dev-release",
      "inherits": "dev-base",
      "binaryDir": "build/dev-release",
      "cacheVariables": {
        "CMAKE_BUILD_TYPE": "RelWithDebInfo"
      }
    },

    {
      "name": "ci-base",
      "hidden": true,
      "inherits": "base",
      "cacheVariables": {
        "CMAKE_BUILD_TYPE": "RelWithDebInfo",
        "CMAKE_C_COMPILER_LAUNCHER": "sccache",
        "CMAKE_CXX_COMPILER_LAUNCHER": "sccache",

        "BYTEWEAVE_BUILD_EXAMPLES": true,
        "BYTEWEAVE_BUILD_TESTS": true,
        "BYTEWEAVE_COPY_COMPILE_COMMANDS": false,
        "BYTEWEAVE_EXPORT_COMPILE_COMMANDS": false,
        "BYTEWEAVE_WARNINGS": true,
        "BYTEWEAVE_WARNINGS_STRICT": false,
        "BYTEWEAVE_WERROR": false
      }
    },

    {
      "name": "ci-lib",
      "hidden": true,
      "inherits": "ci-base",
      "cacheVariables": {
        "BYTEWEAVE_CONSUME_MODE": "library",

        "BYTEWEAVE_BUILD_LIBRARY": true,
        "BYTEWEAVE_BUILD_SINGLE_HEADER": false
      }
    },

    {
      "name": "ci-lib-static",
      "inherits": ["ci-lib"],
      "binaryDir": "build/ci-lib-static",
      "cacheVariables": {
        "BYTEWEAVE_BUILD_SHARED": false
      }
    },

    {
      "name": "ci-lib-shared",
      "inherits": ["ci-lib"],
      "binaryDir": "build/ci-lib-shared",
      "cacheVariables": {
        "BYTEWEAVE_BUILD_SHARED": true
      }
    },

    {
      "name": "ci-single-header",
      "inherits": ["ci-base"],
      "binaryDir": "build/ci-single-header",
      "cacheVariables": {
        "BYTEWEAVE_CONSUME_MODE": "single-header",

        "BYTEWEAVE_BUILD_LIBRARY": false,
        "BYTEWEAVE_BUILD_SINGLE_HEADER": true,
        "BYTEWEAVE_SINGLE_HEADER_IN_ALL": true
      }
    },

    {
      "name": "ci-header-only",
      "inherits": ["ci-base"],
      "binaryDir": "build/ci-header-only",
      "cacheVariables": {
        "BYTEWEAVE_CONSUME_MODE": "header-only",

        "BYTEWEAVE_BUILD_LIBRARY": false,
        "BYTEWEAVE_BUILD_SINGLE_HEADER": false
      }
    },

    {
      "name": "ci-tidy",
      "inherits": ["ci-base"],
      "binaryDir": "build/ci-tidy",
      "cacheVariables": {
        "BYTEWEAVE_BUILD_LIBRARY": true,
        "BYTEWEAVE_BUILD_SINGLE_HEADER": false,
        "BYTEWEAVE_EXPORT_COMPILE_COMMANDS": true
      }
    },

    {
      "name": "ci-package",
      "inherits": ["ci-base"],
      "binaryDir": "build/ci-package",
      "cacheVariables": {
        "BYTEWEAVE_BUILD_EXAMPLES": false,
        "BYTEWEAVE_BUILD_LIBRARY": false,
        "BYTEWEAVE_BUILD_SINGLE_HEADER": true,
        "BYTEWEAVE_BUILD_TESTS": false,
        "BYTEWEAVE_WARNINGS": true,
        "BYTEWEAVE_WARNINGS_STRICT": true,
        "BYTEWEAVE_WERROR": true
      }
    }
  ],

  "buildPresets": [
    { "name": "dev-debug", "configurePreset": "dev-debug", "verbose": true },
    { "name": "dev-release", "configurePreset": "dev-release", "verbose": true },
    { "name": "ci-lib-static", "configurePreset": "ci-lib-static" },
    { "name": "ci-lib-shared", "configurePreset": "ci-lib-shared" },
    { "name": "ci-single-header", "configurePreset": "ci-single-header" },
    { "name": "ci-header-only", "configurePreset": "ci-header-only" },
    { "name": "ci-tidy", "configurePreset": "ci-tidy" },
    { "name": "ci-package", "configurePreset": "ci-package" }
  ]
}
